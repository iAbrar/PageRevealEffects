<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Build a Random Quote Machine</title>
	<meta name="description" content="Some inspiration for multi-layer page reveal effects" />
	<meta name="keywords" content="overlay, reveal, effect, page transition, inspiration, javascript" />
	<meta name="author" content="Codrops" />
	<link rel="shortcut icon" href="favicon.ico">
	<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,600|Merriweather:400' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="css/normalize.css" />
	<link rel="stylesheet" type="text/css" href="css/select-css.css" />
	<link rel="stylesheet" type="text/css" href="css/demo.css" />
	<link rel="stylesheet" type="text/css" href="css/component.css" />
	<script src="js/modernizr-custom.js"></script>
</head>
<body>

	<main class="container">

		<div class="page">
			<blockquote class="quote">
				<p>A good programmer is someone who always looks both ways before crossing a one-way street. </p>
				<footer>Doug Linder</footer>
			</blockquote>
			<a class="btn btn-custom test" aria-label="Navigate bottom right">New quote</a>
		</div>


	</main>
	<script src="js/classie.js"></script>
	<script src="js/main.js"></script>
	<script>
		(function() {
			var pages = [].slice.call(document.querySelectorAll('.page')),
			currentPage = 0,

			revealerOpts = {
					// the layers are the elements that move from the sides
					nmbLayers : 3,
					// bg color of each layer
					bgcolor : ['#0092DD', '#fff', '#3E3A35'],
					// effect classname
					effect : 'anim--effect-3',

				};
				revealer = new Revealer(revealerOpts);

			// clicking the page nav buttons

			document.querySelector('a.test').addEventListener('click', function() { reveal('cornerbottomright'); });

			// triggers the effect by calling instance.reveal(direction, callbackTime, callbackFn)
			function reveal(direction) {
				var callbackTime = 750,
				callbackFn = function() {
					classie.remove(pages[currentPage], 'page--current');
					currentPage = currentPage === 0 ? 1 : 0;
					classie.add(pages[currentPage], 'page--current');
				};

				revealer.reveal(direction, callbackTime, callbackFn);
			}


			// force it to be the first opt as default
			effectCtrl.value = 'effect-3';

			function changeEffect() {
				revealer.destroy();
				var revealerOpts = {
					// the layers are the elements that move from the sides
					nmbLayers : Number(this.options[this.selectedIndex].getAttribute('data-layers')),
					// bg color of each layer
					bgcolor : this.options[this.selectedIndex].getAttribute('data-colors').split(','),
					// effect classname
					effect : 'anim--' + this.value,
					onStart : function(direction) {
						// next page gets class page--animate-[direction]
						var nextPage = pages[currentPage === 0 ? 1 : 0];
						classie.add(nextPage, 'page--animate-' + direction);
					},
					onEnd : function(direction) {
						// remove class page--animate-[direction] from next page
						var nextPage = pages[currentPage === 0 ? 1 : 0];
						nextPage.className = 'page';
					}
				};

				revealer = new Revealer(revealerOpts);
			}
		})();
	</script>
</body>
</html>
